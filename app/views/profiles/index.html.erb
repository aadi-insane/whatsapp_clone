<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="whatsapp-header">Start A Chat</h1>
    <%= link_to chats_path, class: "btn btn-link text-decoration-none" do %>
      <i class="bi bi-x-lg fs-4 text-muted"></i> <!-- Close button -->
    <% end %>
  </div>

  <div class="list-group whatsapp-chat-list">
    <% if @profiles.any? %>
      <% @profiles.each do |profile| %>
        <%= button_to create_direct_chats_path(recipient_id: profile.user.id), method: :post, class: "list-group-item list-group-item-action whatsapp-chat-item", form_class: "w-100" do %>
          <div class="d-flex align-items-center">
            <% if profile.avatar.attached? %>
              <%= image_tag profile.avatar.variant(resize_to_fill: [120, 120]), class: "rounded-circle whatsapp-avatar me-3", style: "object-fit: cover;" %>
            <% else %>
                <%= image_tag "default_user_image.jpg", class: "rounded-circle whatsapp-avatar me-3", style: "object-fit: cover;" %>
            <% end %>
            <div class="flex-grow-1">
              <h5 class="mb-1 whatsapp-chat-name"><%= profile.name || profile.user.email %></h5>
              <p class="mb-1 text-muted"><%= profile.bio.presence || "Hey there! I'm using WhatsApp." %></p>
            </div>
          </div>
        <% end %>
      <% end %>
    <% else %>
      <p class="text-center text-muted">No other users found to chat with.</p>
    <% end %>
  </div>
</div>

<!-- Add Bootstrap Icons CDN for close icon -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">